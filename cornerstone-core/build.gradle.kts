plugins {
    id("io.cornerstone.java-library-conventions")
    id("io.cornerstone.optional-dependencies")
    `java-test-fixtures`
}

dependencies {
    api("org.springframework.boot:spring-boot-starter-actuator")
    api("org.springframework.boot:spring-boot-starter-aspectj")
    api("org.springframework.boot:spring-boot-starter-cache")
    api("org.springframework.boot:spring-boot-starter-data-redis")
    api("org.springframework.boot:spring-boot-starter-data-jpa")
    api("org.springframework.boot:spring-boot-starter-kafka")
    api("org.springframework.boot:spring-boot-starter-opentelemetry")
    api("org.springframework.boot:spring-boot-starter-restclient")
    api("org.springframework.boot:spring-boot-starter-security")
    api("org.springframework.boot:spring-boot-starter-validation")
    api("org.springframework.boot:spring-boot-starter-webmvc")
    api("org.springframework.session:spring-session-data-redis")
    api("tools.jackson.module:jackson-module-mrbean")
    api("""org.springframework.retry:spring-retry:${property("spring-retry.version")}""")
    api("""io.github.resilience4j:resilience4j-spring-boot3:${property("resilience4j.version")}""")
    api("""org.springdoc:springdoc-openapi-starter-webmvc-ui:${property("springdoc.version")}""")
    api("org.apache.commons:commons-pool2")
    implementation("org.springframework.security:spring-security-access")
    implementation("io.micrometer:micrometer-tracing-bridge-otel")
    implementation("io.opentelemetry:opentelemetry-exporter-otlp")
    implementation("""net.ttddyy.observation:datasource-micrometer-spring-boot:${property("datasource-micrometer.version")}""")
    implementation("io.micrometer:micrometer-registry-prometheus")
    optional("org.springframework.boot:spring-boot-starter-amqp")
    testFixturesApi("org.springframework.boot:spring-boot-starter-data-jpa-test")
    testFixturesApi("org.springframework.boot:spring-boot-starter-jdbc-test")
    testFixturesApi("org.springframework.boot:spring-boot-starter-security-test")
    testFixturesApi("org.springframework.boot:spring-boot-starter-test")
    testFixturesApi("org.springframework.boot:spring-boot-starter-webmvc-test")
    testFixturesApi("org.springframework.boot:spring-boot-testcontainers")
    testFixturesApi("org.springframework.boot:spring-boot-starter-amqp")
    testFixturesApi("org.testcontainers:testcontainers-junit-jupiter")
    testFixturesImplementation("org.testcontainers:testcontainers-mysql")
    testFixturesImplementation("org.testcontainers:testcontainers-postgresql")
    testFixturesImplementation("org.testcontainers:testcontainers-mssqlserver")
    testFixturesImplementation("org.testcontainers:testcontainers-oracle-xe")
    testFixturesImplementation("org.testcontainers:testcontainers-db2")
    testFixturesImplementation("org.testcontainers:testcontainers-rabbitmq")
    testFixturesImplementation("org.testcontainers:testcontainers-kafka")
    testFixturesImplementation("com.redis:testcontainers-redis")
    integrationTestRuntimeOnly("com.mysql:mysql-connector-j")
    integrationTestRuntimeOnly("org.postgresql:postgresql")
    integrationTestRuntimeOnly("com.microsoft.sqlserver:mssql-jdbc")
    integrationTestRuntimeOnly("com.ibm.db2:jcc")
    integrationTestRuntimeOnly("com.oracle.database.jdbc:ojdbc8")
}
